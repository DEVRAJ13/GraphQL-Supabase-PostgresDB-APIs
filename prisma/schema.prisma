generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl= env("DIRECT_URL")
}

enum Role {
  ADMIN
  MANAGER
  CLIENT
  USER
}

model Users {
  id                  BigInt     @id @default(autoincrement()) @db.BigInt
  email               String     @unique(map: "ux_users_email") @db.VarChar(255)
  password            String?    @db.VarChar(255)
  fullName            String?    @db.VarChar(256)
  phoneNumber         String?    @db.VarChar(16)
  jobTitle            String?    @db.VarChar(128)
  department          String?    @db.VarChar(128)
  organization        String?    @db.VarChar(128)
  designation         String?    @db.VarChar(128)
  city                String?    @db.VarChar(128)
  state               String?    @db.VarChar(128)
  country             String?    @db.VarChar(128)
  address             String?    @db.VarChar(512)
  postalCode          String?    @db.VarChar(16)
  imageUrl            String?    @db.VarChar(512)
  role                Role       @default(USER)
  lastLoginAt         DateTime?  @db.Timestamp(0)
  isActive            Boolean    @default(true)
  isDeleted           Boolean    @default(false)
  lastPasswordResetAt DateTime?  @db.Timestamp(0)
  failedLoginAttempts Int?       @default(0)
  lastFailedLoginAt   DateTime?  @db.Timestamp(0)
  accountLockedUntil  DateTime?  @db.Timestamp(0)
  timezone            String?    @db.VarChar(64)
  language            String?    @db.VarChar(64)
  createdAt           DateTime   @default(now()) @db.Timestamp(0)
  updatedAt           DateTime   @updatedAt @db.Timestamp(0)
  @@index([isDeleted])
  @@index([isActive])
  @@map("users")
}
